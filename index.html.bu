<html lang="en"><head><title>KST | Coffee Map</title>
<link rel="stylesheet" href="stylesheet.css">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/leaflet.css">
<link rel="stylesheet" href="OverPassLayer.css">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<script src="Control.Geocoder.js"></script>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css" />
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script><script src="OverPassLayer.bundle.js"></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-2">
        <button type="button" class="btn btn-primary" id='actions'><a>Find me!</a></button>
      </div>
      <div class="col-6"></div>
      <div class="col-4">
        <input type="text" palceholder="Search..">
      </div>
    </div>
        <div id="map"></div>
        <script>
          var opl = null;
          function initMap() {
              var options  = { center: new L.LatLng(-41.284915, 174.800674), zoom:15};
              var osmAttribution = 'Map data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors'
              var overpassAttribution = 'POI via <a href="http://www.overpass-api.de/">Overpass API</a>';
              var osmUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';
              var attr =[osmAttribution, overpassAttribution].join(', ');
              var osm = new L.TileLayer(osmUrl, {maxZoom:30, attribution: attr});
              var mapLayer = new L.TileLayer(osmUrl)
              this.map = new L.Map('map', options).addLayer(mapLayer);
              opl = new L.OverPassLayer({
                  minZoom: 10,
                  query: "node['cuisine'='coffee_shop']({{bbox}});out;node['amenity'='cafe']({{bbox}});out;",
                  minZoomIndicatorEnabled: true,
                  minZoomIndicatorOptions: {
                      position: 'topright',
                      minZoomMessage: "Current Zoom-Level: CURRENTZOOM, coffee shops visible at level: MINZOOMLEVEL",
                  },
              });
          }
          function locateUser() {
            this.map.locate({setView : true});
          }
          var map = null;
          initMap();
          map.addLayer(opl);
          L.Control.geocoder().addTo(map);
            $('#actions').find('a').on('click', function() {
                locateUser();
            });
        </script>
    </div>
  </body>
</html>
